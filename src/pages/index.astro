---
import "../styles/global.css"
import "../styles/elements.css"
import "../styles/classes.css"
import History from "../components/History"

const sessionCookie = Astro.cookies.get("session")
if(!sessionCookie){
	return Astro.redirect("/signin")
}
export const prerender = false
---

<html lang="en">
	<head>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<title>
			Touch Grass
		</title>
	</head>
	<body>
		<header class="flex justify-between">
			<img src="/Grass.jpg" alt="company logo" class="companylogo m-2"/>
			<span id="loggedintext" class="text-center justify-self-end m-4 align-middle">
				Touch Grass
			</span>
			<img id="profile" src="/User.jpg" alt="user logo" class="profilepic m-2 justify-self-end"/>
			<div id="menu" class="hidden menu mt-16 flex flex-col">
				<a href="#profile">
					Your Profile
				</a>
				<a href="#history">
					Activity History
				</a>
				<a href="#logout">
					Logout
				</a>
			</div>
		</header>
		<section class = "whitebox w-full max-w-xs justify-self-center mt-40">
			<form id="touchgrass" class="hidden">
				<h1>
					Do you want to touch grass today?
				</h1>
				<button type="submit" class="mt-4 mr-4">
					Yes
				</button>
				<button type="submit" class="mt-4 ml-4">
					Yes Please!
				</button>
			</form>
			<form id="tasks" class="hidden">
				<h1>
					Your Tasks
				</h1>
				<ol>
					<li>
						<input type="checkbox" name="step1" value="Done">
						<label for="step1">
							Go to the adler planetarium
						</label>
					</li>
					<li>
						<input type="checkbox" name="step2" value="Done">
						<label for="step2">
							Ask someone to take a photo of yourself with the adler planetarium in the background
						</label>
					</li>
					<li>
						<input type="checkbox" name="step3" value="Done">
						<label for="step3">
							Upload your photo
						</label>
						<br>
						<input type="file" name="photo">
					</li>
				</ol>
				<button type="submit" class="mt-4">
					Proceed
				</button>
			</form>
			<form id="taskcomplete" class="hidden">
				<h1>
					Congrats, you've completed your task!
				</h1>
				<p>
					Image here!
				</p>
				<button type="submit" class="mt-4 mr-4">
					New Task
				</button>
				<button type="submit" class="mt-4 ml-4">
					Home
				</button>
			</form>
			<History client:load/>
		</section>
		<footer>
			<ul class="flex justify-center">
				<li class="m-4">
					About Us
				</li>
				<li class="m-4">
					Privacy Policy
				</li>
			</ul>
			<p id="copyright" class="copyright justify-self-center">
				&copy;Touch Grass. All Rights Reserved.
			</p>
		</footer>
	</body>
</html>

<script>
document.getElementById('profile')?.addEventListener('click', event => {
	let classList = document.getElementById('menu')?.classList
    classList?.toggle('hidden')
    classList?.toggle('block')
})
</script>